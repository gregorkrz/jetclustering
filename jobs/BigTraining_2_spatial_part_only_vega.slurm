#!/bin/bash
#SBATCH --job-name="SVJtrAll"
#SBATCH --time=00:30:00
#SBATCH --nodes=1
#SBATCH --gres=gpu:1
#SBATCH --ntasks-per-core=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=2
#SBATCH --partition=gpu
#SBATCH --mem=25GB
#SBATCH --output=jobs/big_training_2_output1.log
#SBATCH --error=jobs/big_training_2_error1.log

source env.sh
export APPTAINER_TMPDIR=/work/gkrzmanc/singularity_tmp
export APPTAINER_CACHEDIR=/work/gkrzmanc/singularity_cache
nvidia-smi
srun singularity exec -B /ceph/hpc/home/krzmancg --nv docker://gkrz/lgatr:v3  python -m src.train -train scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1100_mDark-20_rinv-0.3_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1500_mDark-20_rinv-0.3_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1100_mDark-20_rinv-0.5_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1500_mDark-20_rinv-0.5_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1100_mDark-20_rinv-0.7_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1500_mDark-20_rinv-0.7_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1200_mDark-20_rinv-0.3_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-700_mDark-20_rinv-0.3_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1200_mDark-20_rinv-0.5_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-700_mDark-20_rinv-0.5_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1200_mDark-20_rinv-0.7_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-700_mDark-20_rinv-0.7_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1300_mDark-20_rinv-0.3_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-800_mDark-20_rinv-0.3_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1300_mDark-20_rinv-0.5_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-800_mDark-20_rinv-0.5_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1300_mDark-20_rinv-0.7_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-800_mDark-20_rinv-0.7_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1400_mDark-20_rinv-0.3_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-900_mDark-20_rinv-0.3_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1400_mDark-20_rinv-0.5_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-900_mDark-20_rinv-0.5_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-1400_mDark-20_rinv-0.7_alpha-peak_13TeV-pythia8_n-2000 scouting_PFNano_signals2/SVJ_hadronic_std3/s-channel_mMed-900_mDark-20_rinv-0.7_alpha-peak_13TeV-pythia8_n-2000  -val scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-1000_mDark-20_rinv-0.3 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-1500_mDark-20_rinv-0.5 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-700_mDark-20_rinv-0.7 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-900_mDark-20_rinv-0.3 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-1000_mDark-20_rinv-0.5 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-1500_mDark-20_rinv-0.7 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-800_mDark-20_rinv-0.3 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-900_mDark-20_rinv-0.5 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-1000_mDark-20_rinv-0.7 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-700_mDark-20_rinv-0.3 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-800_mDark-20_rinv-0.5 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-900_mDark-20_rinv-0.7 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-1500_mDark-20_rinv-0.3 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-700_mDark-20_rinv-0.5 scouting_PFNano_signals2/SVJ_hadronic_std2/s-channel_mMed-800_mDark-20_rinv-0.7  -net src/models/LGATr/lgatr.py -bs 256 --gpus 0 --run-name Train_LGATr_SB_spatial_part_only --val-dataset-size 4000 --num-epochs 1000 --attr-loss-weight 0.1 --coord-loss-weight 0.1 --beta-type pt+bc --spatial-part-only --validation-steps 2000

# sbatch jobs/BigTraining_2_spatial_part_only_vega.slurm

